# ServerHa
概述
--
ServerHa 是一个嵌入应用程序内部的智能高可用性库，自动故障转移的高可用守护者，提供类似于 Keepalived 的故障切换能力，但专注于应用程序级别的健康检测与多站点协调，确保服务持续在线。

----

### 1. 深度应用程序集成

* **嵌入式库设计**：直接集成到应用程序中，而非独立的外部守护进程

* **应用程序级健康检测**：不仅检测服务器主机状态，更能检测应用程序本身的运行状态

* **VIP漂移机制**：在检测到故障时自动触发虚拟IP地址漂移到健康节点

### 2. 多站点高可用架构

* **站点内切换**：同一物理/逻辑站点内的主备节点快速切换

* **站点间切换**：跨不同地理站点的灾难恢复与业务连续性保障

* **灵活的心跳机制**：
  
  * 支持传统的VIP心跳检测
  
  * 支持基于HTTP的站点间心跳（适用于跨网段、VIP不可用场景）

### 3. 智能决策策略

* **多维度决策因素**：
  
  * 节点优先级配置
  
  * 同级网元的连通性状态
  
  * 抢占模式控制（可配置是否允许抢占）

* **策略驱动的主备分配**：根据综合策略自动确定站点和节点的主备关系

### 4. 运维控制能力

* **手动控制接口**：
  
  * 强制指定特定站点为主站点
  
  * 强制指定特定节点为主节点
  
  * 主动触发主备切换

* **独立部署支持**：允许单一站点独立运行，无需多站点依赖

* **灰度发布支持**：无缝配合应用程序的灰度发布流程，确保高可用性不中断

应用场景
----

* **微服务架构**：确保关键微服务实例的高可用性

* **多数据中心部署**：跨地域的业务连续性保障

* **混合云环境**：跨越公有云和私有云的高可用方案

* **渐进式升级**：支持应用程序的滚动更新和灰度发布

* **故障演练**：便于进行主动故障切换测试

技术优势
----

1. **更精准的故障检测**：从应用程序内部感知状态，避免"服务器正常但应用异常"的漏检

2. **更灵活的部署模式**：适应复杂的网络环境，不依赖特定的网络配置

3. **更智能的决策机制**：基于多因素策略而非简单的优先级排序

4. **更友好的运维体验**：提供丰富的手动控制接口，便于故障排查和系统维护.
   
5. **更友好的二开体验**：基础框架逻辑以搭建好，可根据实际场景以及策略稍稍改动相关代码，即可满足你需要的高可用模块。
